{"version":3,"sources":["../../../../server/api/usuario/usuario.model.js"],"names":[],"mappings":";;AAAA,IAAI,aAAa,QAAQ,kBAAR,CAAjB;;AAEA,OAAO,OAAP,GAAiB;AACf,aAAW,mBAAS,QAAT,EAAkB;AAC3B,QAAI,QAAQ,sBAAZ;AACA,eAAW,KAAX,EAAiB,EAAjB,EAAoB,UAAU,GAAV,EAAc,IAAd,EAAoB;AACtC,UAAI,OAAO,EAAX;AACA,UAAI,GAAJ,EAAS;AACP,aAAK,IAAL,GAAY,SAAZ;AACA,aAAK,GAAL,GAAW,GAAX;AACA,aAAK,IAAL,GAAY,CAAZ;AACD,OAJD,MAIK;AACH,aAAK,IAAL,GAAY,KAAK,CAAL,CAAZ;AACA,aAAK,IAAL,GAAY,CAAZ;AACD;AACD,eAAS,IAAT;AACD,KAXD;AAYD,GAfc;AAgBf,SAAO,eAAS,IAAT,EAAc,QAAd,EAAuB;AAC5B,QAAI,QAAQ,8BAAZ;AACA,eAAW,KAAX,EAAiB,IAAjB,EAAsB,UAAS,GAAT,EAAa,IAAb,EAAkB;AACtC,UAAI,OAAO,CAAX;AACA,UAAI,OAAO,EAAX;AACA,UAAG,GAAH,EAAO;AACL,eAAO,CAAP;AACA,eAAO,EAAP;AACD;AACD,UAAG,KAAK,CAAL,EAAQ,MAAR,KAAmB,CAAtB,EAAwB;;AAEtB,YAAI,MAAM,mBAAV;AACA,eAAO,EAAC,MAAK,KAAK,CAAL,CAAN,EAAc,MAAM,IAApB,EAAyB,KAAK,GAA9B,EAAP;AACD,OAJD,MAIK;AACH,eAAO,EAAC,MAAK,KAAK,CAAL,CAAN,EAAc,MAAM,IAApB,EAAP;AACD;AACD,eAAS,IAAT;AACD,KAfD;AAgBD,GAlCc;AAmCf,mBAAiB,yBAAU,IAAV,EAAe,QAAf,EAAyB;;AAExC,QAAI,QAAQ,qDAAZ;AACA,QAAI,UAAU,CAAC,KAAK,OAAN,EACA,KAAK,OADL,EAEA,KAAK,SAFL,EAGA,KAAK,IAHL,EAIA,KAAK,eAJL,EAKA,KAAK,IALL,EAMA,KAAK,MANL,EAOA,KAAK,KAPL,EAQA,KAAK,QARL,CAAd;AASA,eAAW,KAAX,EAAiB,OAAjB,EAAyB,UAAU,GAAV,EAAc,IAAd,EAAoB;AAC3C,UAAI,OAAO,EAAX;AACA,UAAG,GAAH,EAAO;AACL,aAAK,IAAL,GAAY,CAAZ;AACA,aAAK,GAAL,GAAW,GAAX;AACA,aAAK,IAAL,GAAY,SAAZ;AACD,OAJD,MAIK;AACH,aAAK,IAAL,GAAY,CAAZ;AACA,aAAK,IAAL,GAAY,KAAK,CAAL,CAAZ;AACD;AACD,eAAS,IAAT;AACD,KAXD;AAYD;AA3Dc,CAAjB","file":"usuario.model.js","sourcesContent":["var connection = require('../../connection');\n\nmodule.exports = {\n  getPaises: function(callback){\n    var query = \"call sp_sel_png_pais\";\n    connection(query,'',function (err,rows) {\n      var resp = {};\n      if (err) {\n        resp.data = undefined;\n        resp.msg = err;\n        resp.code = 1;\n      }else{\n        resp.data = rows[0];\n        resp.code = 0;\n      }\n      callback(resp);\n    })\n  },\n  login: function(data,callback){\n    var query = \"call sp_sel_seg_usuario(?,?)\";\n    connection(query,data,function(err,rows){\n      var code = 0;\n      var resp = {};\n      if(err){\n        code = 1;\n        rows = [];\n      }\n      if(rows[0].length === 0){\n        //mensaje de return cuando no se encuentra nada\n        var msg = 'Datos incorrectos';\n        resp = {data:rows[0],code: code,msg: msg};\n      }else{\n        resp = {data:rows[0],code: code};\n      }\n      callback(resp);\n    })\n  },\n  registroUsuario: function (data,callback) {\n    //orden parametros usuario, nombres, apellidos, sexo, nacimiento, pais, correo, clave , telefono\n    var query = \"call sp_ins_png_usuario_estandar(?,?,?,?,?,?,?,?,?)\";\n    var usuario = [data.usuario,\n                  data.nombres,\n                  data.apellidos,\n                  data.sexo,\n                  data.fechaNacimiento,\n                  data.pais,\n                  data.correo,\n                  data.clave,\n                  data.telefono];\n    connection(query,usuario,function (err,rows) {\n      var resp = {};\n      if(err){\n        resp.code = 1;\n        resp.err = err;\n        resp.data = undefined;\n      }else{\n        resp.code = 0;\n        resp.data = rows[0];\n      }\n      callback(resp);\n    })\n  }\n};\n"]}